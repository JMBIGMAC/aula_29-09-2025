{% extends "base.html" %}

{% block title %}Novo Empréstimo - Biblioteca{% endblock %}

{% block content %}
<h2>Registrar Novo Empréstimo</h2>

<div class="nav-links">
    <a href="{{ url_for('emprestimos') }}">← Voltar para Empréstimos</a>
</div>

<form method="POST" style="margin-top: 30px;">
    <div class="form-group">
        <label for="id_usuario">Usuário:</label>
        <select id="id_usuario" name="id_usuario" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
            <option value="">Selecione um usuário</option>
            {% for usuario in usuarios %}
                <option value="{{ usuario.id }}">{{ usuario.nome }} ({{ usuario.email }})</option>
            {% endfor %}
        </select>
    </div>
    
    <div class="form-group">
        <label for="id_livro">Livro Disponível:</label>
        <select id="id_livro" name="id_livro" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
            <option value="">Selecione um livro</option>
            {% for livro in livros %}
                <option value="{{ livro.id }}">{{ livro.titulo }} - {{ livro.autor }} ({{ livro.ano or 'Ano não informado' }})</option>
            {% endfor %}
        </select>
    </div>
    
    <div class="form-group">
        <label for="data_emprestimo">Data do Empréstimo:</label>
        <input type="date" id="data_emprestimo" name="data_emprestimo" required>
    </div>
    
    <button type="submit">Registrar Empréstimo</button>
</form>

<script>
// Set today's date as default
document.getElementById('data_emprestimo').value = new Date().toISOString().split('T')[0];
</script>
{% endblock %}